# Atheme hooks system
#
#   hook_call_NAME(argument)
#   hook_add_NAME(handler)
#   hook_add_first_NAME(handler)
#   hook_del_NAME(handler)
#
# Hooks that take a direct pointer to an object may not destroy that object.
# If this is necessary, it must be done in an event added from the hook.
#
# Hooks with _can_ or _check_ in the name may fill in a field in the argument
# structure to indicate what should happen. They are not allowed to destroy
# the object.
#
# The hooks channel_join, user_add, and user_nickchange, may destroy the
# object by setting the pointer in the argument structure to NULL, deleting
# the object from Atheme's state and sending an appropriate message to ircd.
# Note that channel_join may kick the user, but may not clear the channel.
#
# Most other hooks may not destroy the object or prevent the action.
#
# Current list of hooks:

# (main)
config_purge                    void
config_ready                    void
db_saved                        void
db_write                        struct database_handle *
# XXX: for groupserv.  remove when we have proper dependency resolution in opensex.
db_write_pre_ca                 struct database_handle *
shutdown                        void

# (ircd)
channel_add                     struct channel *
channel_can_change_topic        struct hook_channel_topic_check *
channel_delete                  struct channel *
channel_join                    struct hook_channel_joinpart *
channel_message                 struct hook_channel_message *
channel_mode                    struct hook_channel_mode *
channel_mode_change             struct hook_channel_mode_change *
channel_part                    struct hook_channel_joinpart *
channel_topic                   struct channel *
channel_tschange                struct channel *
server_add                      struct server *
server_delete                   struct hook_server_delete *
server_eob                      struct server *
user_add                        struct hook_user_nick *
user_away                       struct user *
user_delete                     struct user *
user_delete_info                struct hook_user_delete_info *
user_deoper                     struct user *
user_nickchange                 struct hook_user_nick *
user_oper                       struct user *

# (services)
channel_acl_change              struct hook_channel_acl_req *
channel_can_register            struct hook_channel_register_check *
channel_check_expire            struct hook_expiry_req *
channel_drop                    struct mychan *
channel_info                    struct hook_channel_req *
channel_pick_successor          struct hook_channel_succession_req *
channel_register                struct hook_channel_req *
channel_succession              struct hook_channel_succession_req *
grant_channel_access            struct user *
group_drop                      struct mygroup *
group_register                  struct mygroup *
host_request                    struct hook_host_request *
metadata_change                 hook_metadata_change_t *
module_load                     hook_module_load_t *
myentity_find                   hook_myentity_req_t *
myuser_delete                   struct myuser *
nick_can_register               hook_user_register_check_t *
nick_check                      struct user *
nick_check_expire               struct hook_expiry_req *
nick_enforce                    hook_nick_enforce_t *
nick_group                      hook_user_req_t *
nick_ungroup                    hook_user_req_t *
operserv_info                   struct sourceinfo *
service_introduce               struct service *
user_can_login                  hook_user_login_check_t *
user_can_logout                 hook_user_logout_check_t *
user_can_register               hook_user_register_check_t *
user_can_rename                 hook_user_rename_check_t *
user_check_expire               struct hook_expiry_req *
user_drop                       struct myuser *
user_identify                   struct user *
user_info                       hook_user_req_t *
user_info_noexist               hook_info_noexist_req_t *
user_needforce                  hook_user_needforce_t *
user_register                   struct myuser *
user_rename                     hook_user_rename_t *
user_sethost                    struct user *
user_verify_register            hook_user_req_t *

# (sasl)
sasl_input                      struct sasl_message *
sasl_may_impersonate            hook_sasl_may_impersonate_t *

language: c
sudo: false
os: linux
dist: bionic

notifications:
  email: false

addons:
  apt:
    packages:
      - libgettextpo-dev
      - libqrencode-dev
      - libcrack2-dev
      - libsodium-dev
      - libidn11-dev
      - libldap2-dev
      - libpcre3-dev
      - libperl-dev
      - libssl-dev
      - nettle-dev
      - clang
      - gcc

compiler:
  - clang-7
  - gcc-7

env:
  - ATHEME_CONF_ARGS=""
  - ATHEME_CONF_ARGS="--enable-contrib"

script:
  - scripts/ci-build.sh

matrix:
  allow_failures:
    - env: ATHEME_CONF_ARGS="--enable-contrib"
